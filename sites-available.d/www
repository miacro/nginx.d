upstream node {
  server 127.0.0.1:3001;
  server 127.0.0.1:3002;
}
upstream live{
  server 127.0.0.1:5000;
}
upstream node_ws {
  server 127.0.0.1:4000;
}
server {
  listen 0.0.0.0:80;
  server_name localhost b.weixiaocaomao.com *.yoyuyo.cn;
  access_log /var/log/nginx/www-access.log main;
  error_log /var/log/nginx/www-error.log info;
  client_body_buffer_size 10M;

  charset utf8;

  location / {
    root /cqthink/web/www;
  }
  location /w/home/index/ {
    proxy_pass http://node;
  }
  location /w/wx/index {
    proxy_pass http://node;
    proxy_pass_request_headers      on;
  }
  location /log {
    proxy_pass http://node;
    proxy_pass_request_headers      on;
  }
  location /module{
    proxy_pass http://node;
    proxy_pass_request_headers      on;
  }
  location /biz {
    proxy_pass http://node;
    proxy_pass_request_headers      on;
  }
  location /w {
    proxy_pass http://node;
    proxy_pass_request_headers on;
  } 
  location /live{
    proxy_pass http://live;
    proxy_pass_request_headers on;
  }
  location /chat {
    proxy_pass http://node_ws;
    proxy_pass_request_headers      on;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
  }
}
